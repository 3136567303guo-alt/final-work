# 📘 物理概念交互可视化：阻尼受迫振动与共振演示
**Interactive Visualization of Damped Driven Harmonic Oscillator**

> **项目类型**：期末大作业 - 物理仿真工具
> **技术栈**：Python 3, Streamlit, Scipy, Matplotlib
> **作者**：郭柠豪

## 1. 项目简介 (Introduction)

本项目是一个基于物理引擎的交互式演示工具，旨在直观展示**阻尼受迫振动**的动力学行为。

不同于传统的预设动画，本工具核心采用 **`scipy.integrate.odeint`** 对牛顿第二定律微分方程进行实时数值积分。用户可以动态调节质量、劲度系数、阻尼和驱动力参数，观察系统在**时域**、**相空间**以及**频域**中的响应，特别是可以直观地探索**共振 (Resonance)** 现象。

### ✨ 核心功能
*   **实时物理仿真**：基于 $m\ddot{x} + c\dot{x} + kx = F(t)$ 的高精度数值解。
*   **多维可视化**：
    *   📈 **时域图**：展示位移 $x(t)$ 随时间的演化。
    *   🌀 **相图**：展示速度-位移 ($v-x$) 轨迹，直观呈现能量耗散与守恒。
    *   🏔️ **频域图**：展示幅频响应曲线，动态标记当前驱动频率在共振曲线上的位置。
*   **共振预警**：当驱动频率接近固有频率时，系统会自动提示并展示振幅暴涨现象。

---

## 2. 快速开始 (Quick Start)

请按照以下步骤配置环境并运行程序。

### 2.1 环境要求
*   Python 3.8 或更高版本
*   推荐使用 VS Code 或 PyCharm

### 2.2 安装依赖
在项目根目录下，打开终端 (Terminal) 并运行：

```bash
pip install -r requirements.txt
```

> **requirements.txt 内容：**
> *   streamlit
> *   numpy
> *   matplotlib
> *   scipy

### 2.3 启动应用
**注意**：本项目使用 Streamlit 框架，不能直接使用 Python 解释器运行。请在终端输入：

```bash
streamlit run main.py
```

成功执行后，终端将显示本地访问地址（通常为 `http://localhost:8501`），浏览器将自动弹出应用界面。

---

## 3. 操作指南 (User Guide)

界面分为左侧的**参数控制区**和右侧的**数据可视化区**。

### 3.1 参数控制 (Sidebar)

| 模块 | 参数 | 说明 | 物理意义 |
| :--- | :--- | :--- | :--- |
| **1. 系统属性** | **质量 (m)** | 振子的质量 (kg) | 惯性大小，影响周期 |
| | **劲度系数 (k)** | 弹簧软硬程度 (N/m) | 恢复力大小，影响固有频率 |
| | **阻尼系数 (c)** | 空气/介质阻力 (N·s/m) | 决定能量耗散快慢，c=0 为简谐运动 |
| **2. 外部驱动** | **驱动力幅值 (F0)** | 外力最大值 (N) | 输入能量的大小 |
| | **驱动频率 ($\omega_{dr}$)** | 外力变化的快慢 (rad/s) | **关键参数**，调节它以触发共振 |
| **3. 初始状态** | **位移/速度** | $t=0$ 时的状态 | 决定运动的起始点 |

### 3.2 玩法推荐：如何观测“共振”？

这是本项目的核心演示功能，请尝试以下操作：

1.  观察左侧边栏蓝色提示框显示的**固有频率 $\omega_n$**（例如：4.47 rad/s）。
2.  将**阻尼系数 c** 调小（例如 0.1 或 0.2），以便共振现象更明显。
3.  慢慢拖动**驱动频率 $\omega_{dr}$** 滑块。
4.  观察界面最下方的**“幅频响应”图**：
    *   你会看到一个**红点**沿着橙色的曲线移动。
    *   当红点移动到**山峰最高点**（即 $\omega_{dr} \approx \omega_n$）时，观察上方的时域波形。
    *   **现象**：振幅会变得巨大，甚至可能超出图表范围，这就是**共振**！

---

## 4. 代码结构说明 (Project Structure)

为了遵循良好的工程化规范，本项目采用了模块化设计：

```text
physics_demo/
│
├── main.py              # [入口] UI 布局与交互逻辑
│                        # 负责处理 Streamlit 界面显示、接收用户输入、调用绘图库
│
├── physics_model.py     # [核心] 物理计算引擎
│                        # 包含微分方程定义 (system_equations)
│                        # 包含数值积分求解器 (run_simulation)
│                        # 包含共振曲线理论计算 (calculate_resonance_curve)
│
├── requirements.txt     # [配置] 项目依赖库列表
│
└── README.md            # [文档] 使用说明与项目介绍
```

---

## 5. 物理原理简述 (Physics Background)

本模拟器求解的是**二阶线性非齐次微分方程**：

$$ m \frac{d^2x}{dt^2} + c \frac{dx}{dt} + kx = F_0 \cos(\omega_{dr} t) $$

*   **$m \frac{d^2x}{dt^2}$**: 惯性项 (牛顿第二定律)
*   **$c \frac{dx}{dt}$**: 阻尼力 (与速度成正比，方向相反)
*   **$kx$**: 弹性回复力 (胡克定律)
*   **$F_0 \cos(\omega_{dr} t)$**: 周期性驱动力

**数值解法**：
我们将上述二阶方程转化为两个一阶方程，利用 `scipy.integrate.odeint` (基于 FORTRAN odepack 的 LSODA 算法) 进行求解，相比简单的欧拉法，能保证更高的能量计算精度。

---

## 6. 常见问题 (FAQ)

**Q: 为什么运行 `python main.py` 报错或没反应？**
A: Streamlit 应用必须通过 `streamlit run main.py` 命令启动，它需要启动一个本地 Web Server。

**Q: 为什么相图有时候是椭圆，有时候是螺旋？**
A: 当阻尼 $c=0$ 时，能量守恒，轨迹闭合（椭圆）；当 $c>0$ 时，能量被耗散，轨迹会像螺旋一样收缩到原点（如果无驱动力）。

**Q: 浏览器报错 "Connection Refused"？**
A: 请检查终端是否关闭。如果终端关闭，服务器也就停止了。请重新运行 `streamlit run main.py`。